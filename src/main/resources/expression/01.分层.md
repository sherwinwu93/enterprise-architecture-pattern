### 分层
在分解复杂软件系统时,软件设计者用得最多的技术之一就是分层.在计算机本身的架构中,可以看到:到
处都有分层的例子:不同的层从包含了操作系统调用的程序设计语言,到设备驱动程序和CPU指令集,再到
芯片内部的各种逻辑门.网络互联中,FTP层架构再TCP之上,TCP架构再IP之上,IP又架构再以太网之上.

当用分层的观点来考虑系统时,可以将各个子系统想象称按照"多层蛋糕"的形式来组织,每一层都依托在
其下层之上.在这种组织方式下,上层使用了下层定义的各种服务,而下层对上层一无所知.另外,每一层
对自己的上层隐藏其下层的细节.因此,第4层使用第3层的服务,第3层使用第2层的服务,第4层无需知道
第2层的细节.(当然,并非所有的分层架构都这么隔绝,但绝大多数是不透明的,或至少是几乎不透明的.)

将系统按照层次分解又很多重要的好处:
1. 在无需过多了解其他层次的基础上,可以将某一层作为一个有机整体来理解.例如,无需知道以太网的
工作细节,你照样可以在TCP上构建FTP服务.
2. 可以替换某层的具体实现,只要前后提供的服务相同即可.例如,FTP服务无论是在以太网、PPP上,还
是网络运营商使用的任何网络上都无需改变,而且与提供传输电缆的网络运营商无关.
3. 可以将层次间的依赖性减到最低.假设网络运营商改变了物理传输系统,但只要IP层不变,FTP服务就
可以不改变.
4. 分层有利于标准化工作.TCP和IP就是关于它们各自层次如何工作的标准.
5. 一旦构建好了某一层次,就可以用它为很多上层服务提供支持.因此,TCP/IP同时被FTP,telnet,ssh
和http使用.否则,所有这些高层协议都必须编写它们各自的底层协议.

分层是一种重要的技术,但也有缺陷: